<?php $notype=1;require('../../init.php'); ?><html><head><title>Ajax auto-suggest / auto-complete | BrandSpankingNew</title><script type="text/javascript" src="js/bsn.Ajax.js"></script><script type="text/javascript" src="js/bsn.DOM.js"></script><script type="text/javascript" src="js/bsn.AutoSuggest.js"></script><style type="text/css">	body {		font-family: Lucida Grande, Arial, sans-serif;		font-size: 10px;		text-align: center;		margin: 0;		padding: 0;	}		table	{		border: 1px;		background-color: #999;		font-size: 10px;	}	tr	{		vertical-align: top;	}	th	{		text-align: left;		background-color: #ccc;	}	th,	td	{		padding: 2px;		font-family: Lucida Grande, Arial, sans-serif;		font-size: 1.2em;	}	td	{		background-color: #fff;	}		a {		font-weight: bold;		text-decoration: none;		color: #f30;	}		a:hover {		color: #fff;		background-color: #f30; 	}		#wrapper {		width: 400px;		margin: 10px auto;		text-align: left;	}		#content {		font-size: 1.2em;		line-height: 1.8em;	}		#content h1 {		font-size: 1.6em;		border-bottom: 1px solid #ccc;		padding: 5px 0 5px 0;	}	#content h2 {		font-size: 1.2em;		margin-top: 3em;	}	label	{		font-weight: bold;	}	/* 	================================================	styling for autosuggest begins here	================================================	*/	body	{		position: relative;	}			ul.autosuggest	{		position: absolute;		list-style: none;		margin: 0;		padding: 0;		overflow-y: auto;	}		ul.autosuggest li	{		text-align: left;		border-bottom: 1px solid #ccc;		border-left: 1px solid #ccc;		border-right: 1px solid #ccc;	}		ul.autosuggest li a:link,	ul.autosuggest li a:visited	{		display: block;		padding: 2px;		text-decoration: none;		background-color: #eee;	}	ul.autosuggest li a:hover,	ul.autosuggest li a:active	{		color: #fff;		background-color: #f30;	}	ul.autosuggest li.highlight a:link,	ul.autosuggest li.highlight a:visited	{		color: #fff;		background-color: #f30;	}		</style></head><body><div id="wrapper"><div id="content"><p>view the <a href="http://www.brandspankingnew.net/archive/2006/08/ajax_auto-suggest_auto-complete.html">original article</a> at BrandSpankingNew</p>	<h1>Autosuggest / Autocomplete with Ajax</h1><p>Here's an example of an Ajax-powered auto-suggestion, or auto-complete textfield.</p><h2>Example</h2><div><form method="get" action=""><label for="testinput">Country</label><input type="text" id="testinput" value="" /> <input type="submit" value="submit" /></form></div><h2>Description</h2><p>The AutoSuggest class adds a popdown menu of suggested values to a text field. The user can either click directly on a suggestion to enter it into the field, or navigate the list using the up and down arrow keys, selecting a value using the tab key. The values for the suggestion list are to provided as XML (by a PHP script, or similar).</p><p>The results of the first request are cached on the client machine and are filtered as the user continues to type, to reduce the number of requests hitting the server.</p><h2>Usage</h2><p>The script requires three javascript files:</p><ul>	<li><code>bsn.Ajax.js</code> - a generic ajax class</li>	<li><code>bsn.DOM.js</code> - a generic DOM helper class</li>	<li><code>bsn.AutoSuggest.js</code> - the actual AutoSuggest class</li></ul><p><a href="http://www.brandspankingnew.net/download.php?file=autosuggest_v1.zip" title="download the zip archive"><strong>Get the files here!</strong></a></p><p>Once these three classes have been included, a normal text field is transformed into an AutoSuggest text field by adding the following javascript to your code, either in a <code>body.onload</code> function or just before the <code>&lt;/body&gt;</code> tag.</p><pre><code>var options = {	script: "pathToScript.php?",	varname: "variableName"};var as = new AutoSuggest('idOfTextfield', options);</code></pre><p>The <code>options</code> object contains the (surprise, surprise) the options for the AutoSuggest instance. Note that the script variable includes the question mark (<code>?</code>) at the end. This is to allow other variables to be passed to the script via <code>GET</code>, for example <code>script: "http://www.yourserver.com/backend.php?list=countries&amp;"</code>. The <code>varname</code> option is the name of the variable that should contain the current value of the text field, and is simpy added on to the end of the script variable when the script is called, along with the current value of the text field, giving:</p><p><code>http://www.yourserver.com/backend.php?list=countries&amp;variableName=currentValue</code></p><p>The XML output from the script should have the following structure:</p><pre><code>&lt;results&gt;	&lt;rs&gt;Foobar&lt;/rs&gt;	&lt;rs&gt;Foobarfly&lt;/rs&gt;	&lt;rs&gt;Foobarnacle&lt;/rs&gt;&lt;/results&gt;</code></pre><p>The AutoSuggest object creates the following XHTML code, inserting as the last element in the <code>body</code>:</p><pre><code>&lt;ul id="as_idOfTextField" class="autosuggest"&gt;	&lt;li&gt;&lt;a href="#" onclick="someFunction()"&gt;Foobar&lt;/a&gt;&lt;/li&gt;	&lt;li&gt;&lt;a href="#" onclick="someFunction()"&gt;Foobarfly&lt;/a&gt;&lt;/li&gt;	&lt;li&gt;&lt;a href="#" onclick="someFunction()"&gt;Foobarnacle&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</code></pre><p>The list can then be styled using normal CSS.</p><pre><code>ul.autosuggest{	list-style: none;	padding: 0;	margin: 0;	<em>[etc.]</em>}ul.autosuggest li.highlight{	<em>[markup for highlighted list items]</em>}</code></pre><p>	NOTE: Safari seems to require that the <code>position</code> attribute of the <code>body</code> element be set to <code>relative</code>.</p><h2>Options</h2><p>The options object can contain the following properties:</p><table>	<tr>		<th>Property</th>		<th>Type</th>		<th>Default</th>		<th>Description</th>	</tr>	<tr>		<td><strong>script</strong></td>		<td>String</td>		<td>-</td>		<td><strong>REQUIRED!</strong> The path to the script that returns the results in XML format.</td>	</tr>	<tr>		<td><strong>varname</strong></td>		<td>String</td>		<td>"input"</td>		<td>Name of variable passed to script holding current input.</td>	</tr>	<tr>		<td><strong>minchars</strong></td>		<td>Integer</td>		<td>1</td>		<td>Length of input required before AutoSuggest is triggered.</td>	</tr>	<tr>		<td><strong>className</strong></td>		<td>String</td>		<td>"autosuggest"</td>		<td>Value of the class name attribute added to the generated <code>ul</code>.</td>	</tr>	<tr>		<td><strong>delay</strong></td>		<td>Integer</td>		<td>500</td>		<td>Number of milliseconds before an AutoSuggest AJAX request is fired.</td>	</tr>	<tr>		<td><strong>timeout</strong></td>		<td>Integer</td>		<td>2500</td>		<td>Number of milliseconds before an AutoSuggest list closes itself.</td>	</tr>	<tr>		<td><strong>cache</strong></td>		<td>Boolean</td>		<td>true</td>		<td>Whether or not a results list should be cached during typing.</td>	</tr></table><h3>Timeouts</h3><p>	The default timeout is set at 2500 milliseconds. After two and a half seconds of inactivity the list closes itself. However, this timeout is reset each time the user types another character. Furthermore, if the user moves the mouse pointer over the AutoSuggest list, the timeout is cancelled altogether, until the mouse pointer is moved off the list.</p><p>	If the user clicks an item in the list, the list stays open for a further second, allowing for corrections.</p><h3>AJAX Errors</h3><p>At the moment, AJAX errors simply trigger a javascript <code>alert()</code> containing the error code.</p></div></div><?php  echo'hey';$largelist=1;require('../../inc/bible_list.php'); ?><script type="text/javascript">	var options = {		script:"test.php?",		varname:"input",		minchars:1,		bible:6,	};	var as = new AutoSuggest('testinput', options);</script></body>